\documentclass[11pt, a4paper]{article}

% --- Language and Encoding ---
\usepackage{fontspec}
\usepackage{polyglossia}
%\usepackage{graphicx}% not needed for the example
\usepackage{tocloft}      
%\usepackage{mathptmx}% not needed for the example
%\usepackage{float}% not needed for the example
%\usepackage{amsmath}% not needed for the example
%\numberwithin{figure}{chapter}
%\usepackage{titletoc}% not needed for the example
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
\renewcommand{\cftdotsep}{.5}% use the same dot distance for all levels
\setmainlanguage{swedish}
\usepackage{wrapfig}
\usepackage{caption} % strongly recommended
% --- Fonts (Strict Word Parity) ---
% These fonts must be installed on your system.
\setmainfont[
    Ligatures=TeX,
    BoldFont={Times New Roman Bold}, 
    ItalicFont={Times New Roman Italic}
]{Times New Roman}

\setsansfont[
    Ligatures=TeX,
    BoldFont={Arial Bold}, 
    ItalicFont={Arial Italic}
]{Arial}

% --- Page Layout (Standard Word Margins) ---
\usepackage[margin=2.54cm]{geometry}

% --- Formatting and Spacing ---
% 'parskip' handles the "blank line between paragraphs, no indent" style
\usepackage[skip=10pt plus1pt]{parskip} 
\linespread{1.15} % Standard Word line spacing (Multiple 1.15)

% --- Graphics and Figures ---
\usepackage{graphicx}
\usepackage{float}

% --- References (IEEE Style) ---
% [cite: 112, 113] "Referenser ska anges enligt IEEE-standarden"
\usepackage[backend=biber, style=ieee]{biblatex}
\addbibresource{references.bib}

% --- Clickable Links ---
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=black,      
    urlcolor=blue,
    citecolor=black,
}

% --- Header/Footer Customization ---
% Matches the header found in the preview [cite: 139, 140]
%\usepackage{fancyhdr}
%\pagestyle{fancy}
%\fancyhf{}
%\fancyhead[L]{\small DVA305} 
%\fancyhead[R]{\small Rapport}
%\fancyfoot[C]{\thepage}
%\renewcommand{\headrulewidth}{0.5pt}

% --- Section Heading Formatting (The Fix) ---
\usepackage{titlesec}

% 1. Format: Arial, Bold, Size adjustments to match Word [cite: 175]
\titleformat{\section}
  {\normalfont\Large\bfseries\sffamily}{\thesection}{1em}{}
\titleformat{\subsection}
  {\normalfont\large\bfseries\sffamily}{\thesubsection}{1em}{}

% 2. Spacing: TIGHTEN the space after headings.
% Syntax: \titlespacing*{command}{left}{before-sep}{after-sep}
% Word usually has space *before* a heading, but 0pt or very little *after*.
% We set 'after-sep' to 3pt (minimal) to fix the "incorrect space" issue.
\titlespacing*{\section}
  {0pt}{18pt plus 2pt minus 2pt}{3pt} 

\titlespacing*{\subsection}
  {0pt}{12pt plus 2pt minus 2pt}{0pt}

% --- Document Start ---
\begin{document}

% ==========================================
% TITELBLAD [cite: 5, 6, 143]
% ==========================================
\begin{titlepage}
    \centering
    \thispagestyle{empty} % No header/footer on title page
    \vspace*{2cm}
    
    {\Huge \bfseries \sffamily VAE kompression med AVIF } \\ 
    \vspace{0.5cm}
    %{\large En undertitel om så önskas} % [cite: 12, 150]
    
    %\vspace{2cm}

    
    {\Large \textbf{DVA305}} \\ \vspace{0.2cm} % [cite: 9, 147]
    \Large \textbf{Information – kunskap – vetenskap – etik} \\ 
    \Large \textbf{[VT] 2026 Grupp 4} 
    
        % [cite: 13, 151] "En väl val bild kan också placeras på titelbladet"
    \vspace{0.5cm} % tweak this
    \noindent\centering
    \includegraphics[width=0.75\linewidth]{images/kodim23.png}
    \par
    \vspace{0.5cm} % tweak this

    
    {\Large \textbf{Författare:}} \\ \vspace{0.2cm} % [cite: 8, 146]
    Ayman, Martin, Patrik och Salah  \\ 
    %\texttt{epost@student.mdu.se} % [cite: 10, 148]
    
    \vspace{2cm}
    \vfill
    
    {\large Ort och datum:}\\ % [cite: 11, 149]
    \large Västerås, \today
    
    \vspace{1cm}
\end{titlepage}

% ==========================================
% SAMMANFATTNING [cite: 14, 153]
% ==========================================
\newpage
\thispagestyle{plain} % Simple page number
\section*{Sammanfattning}
Det här avsnittet ska helt enkelt vara en sammanfattning av hela rapporten. En lämplig omfattning är c:a 200 – 250 ord. En bra tumregel är att sammanfattningen ska hållas så kort det går, den ska vara kompakt men tydlig, informativ och väcka intresse.

Summera allt det som är väsentligt i rapporten och presentera de viktigaste resultaten och slutsatserna. Följande bör ingå:
\begin{itemize}
    \item Presentation och introduktion av området för arbetet.
    \item Översiktlig presentation av frågeställningen.
    \item Generell beskrivning av arbetet, hur ni angripit frågeställningen och vad ni har gjort.
    \item Sammanfattning av resultat och slutsatser.
\end{itemize}

Det ska inte finnas någon beskrivning av hur rapporten är uppställd och inte några detaljer i sammanfattningen. Sammanfattningen ska kunna läsas helt fristående från resten av rapporten och vända sig till en ganska bred målgrupp läsare. Den ska ge en bra grund för att en läsare ska kunna bedöma om hen är intresserad av att läsa hela rapporten. 

När hela rapporten är klar bör ni granska och vid behov revidera sammanfattningen så att den överensstämmer med rapporten.

\newpage

% ==========================================
% INNEHÅLLSFÖRTECKNING [cite: 28, 167]
% ==========================================
\tableofcontents
\newpage

% [cite: 30, 169] "En förteckning över figurer ska finnas efter innehållsförteckningen."
%\listoffigures
%\newpage

% ==========================================
% 1. INLEDNING [cite: 46, 175]
% ==========================================
\section*{Inledning}
\addcontentsline{toc}{section}{Inledning} 
%I inledningen ska ni introducera ämnet för ert arbete och motivera varför det är viktigt. Inledningen ska vara allmän och syftar till att ge läsaren en introduktion till ämnet och leder läsaren in i texten.

%Följande bör ingå:
%\begin{itemize}
%    \item Presentation av området och ämnet för arbetet. Det här bör komma tidigt och ska fånga intresset.
%    \item Presentationen kan också innehålla eventuellt viktiga definitioner av begrepp.
%    \item Presentation av ert arbete inklusive syfte och frågeställning. Observera att frågeställningen beskrivs i detalj senare i rapporten. Men läsaren behöver få en förståelse för frågeställningen inför avsnittet bakgrund.
%    \item Motivation till varför uppgiften är intressant och varför frågeställningen är relevant.
%\end{itemize}

%Ingen specialiserad terminologi eller matematik bör ingå i inledningen. Efter inledningen ska läsaren och ni ha en bas av gemensam förståelse.
Behovet att optimera lagring och läsning av bilder har sedan länge varit en stor och viktig del inom datavetenskapen och således föremål för intensiv forskning [?]. I och med informationssamhällets framväxt har det uppstått ett allt större behov av att kunna lagra filerna så kompakt som möjligt för att vi ska kunna hantera denna växande mängd av data på våra enheter [?]. Utvecklingen har framgångsrikt lett till nya algoritmer som på effektiva sätt kunnat inhämta och presentera bildinformationen från olika lagrings- eller strömningsmedia [?]. 

Traditionellt sett har bilder mestadels redigerats i bildbehandlingsprogram såsom Photoshop eller Gimp. Bilden har behandlats utifrån sin rumsliga struktur med pixeln som viktigaste beståndsdel. Bildredigering har i dessa program framförallt handlat om att skala, rotera eller ändra färgen på enskilda pixlar eller grupper av pixlar. Huvudsyftet har varit att möjliggöra ett intuitivt sätt att arbeta med bilder för oss människor [?]. I detta sammanhang har populära filformat såsom JPG, PNG och AVIF sakta utformats för att tjäna detta syfte på bästa sätt [?]. 



Med framväxten av maskininlärning (ML) och djupinlärning (DL) har nya sätt att bearbeta bilder introducerats [?]. Istället för att manipulera pixlar direkt i det visuella planet finns nu möjligheter att arbeta med bildens semantiska innehåll i en s.k. latent representation [?]. En ML-modell kan med denna latenta representation som grund generera en, eller flera visuellt lika (eller olika) bilder på skärmen [?]. \begin{wrapfigure}{r}{0.42\textwidth}
    \vspace{-10pt} % optional tuning
    \centering
    \includegraphics[width=0.40\textwidth]{images/latent.png}
    \caption{Exempel på latent}
    \label{fig:kodim23}
\end{wrapfigure}Eftersom ML-modeller inte behöver tolka bilder utifrån samma strukturella ordning som människor, kan bildinformationen omstruktureras på nya sätt som bättre passar modellens syfte [?]. Målet med dessa ML-baserade metoder är inte i första hand att minimera filstorleken, utan genom att komprimera bort överflödig information underlättar man beräkningsarbetet och ökar på så sätt även prestandan i modellerna [?].
Ser man enbart till filstorlek kontra bildkvalitet är dagens etablerade kompressionsalgoritmer redan mycket effektiva. Till exempel kan dessa med lätthet krympa bildens filstorlek upp till 60 gånger jämfört med originalet [?]. Detta med en kvalitet som för blotta ögat är nästintill omöjlig att särskilja från originalbilden. Dessutom kan sådana komprimerade bildfiler öppnas på bara några millisekunder. Detta till trots finns ingen egentlig fördel med att använda dessa bildformat i ML-modeller. I komprimerat tillstånd är bildinformationen kodad på ett sätt som gör det omöjligt att bearbeta bilden vidare utan att först återföra den till sin fulla storlek, varpå alla fördelarna har gått förlorade. [?]. 


\begin{figure}
    \centering
    \includegraphics[width=0.9\linewidth]{images/flow.png}
    \caption{Översikt av flödet}
    \label{fig:placeholder}
\end{figure}


Tack vare att ML-modeller som tidigare nämnts inte behöver ha bilder i ett direkt visuellt format under bearbetningen forskas det på att skapa mer kompakta representationer av bilddata som samtidigt behåller semantisk information. Mycket av den information som krävs enbart för att återge bilden kan utelämnas tills modellen är klar och den slutliga bilden ska visualiseras [?]. Resultatet blir ett kompakt dataformat som ändå behåller det viktigaste för att beskriva vad bilden föreställer. Med ett sådant format kan bilder både ta mindre plats på hårddisken och matas direkt in i ML-modeller utan tunga mellanliggande steg för bearbetning och rekonstruktion [?]. Detta kan i så fall visa sig särskilt värdefullt när man arbetar med väldigt stora bilder eller stora mängder bilddata, såsom till exempel högupplösta fotografier eller video där traditionell hantering skulle vara ineffektiv [?]. 
% ==========================================
% 2. BAKGRUND [cite: 56, 185]
% ==========================================



\section*{Bakgrund}
\addcontentsline{toc}{section}{Bakgrund} 
\vspace{0.5cm} % tweak this
%I avsnittet bakgrund redogör ni först för sådan kunskap som läsaren behöver för att förstå ert arbete och ert bidrag. Presentera grundläggande kunskap som behövs för att förstå området och frågeställningen.

%Syftet med bakgrunden är också att placera in ert arbete i ett vetenskapligt sammanhang och jämföra det med tidigare publicerade vetenskapliga arbeten och resultat inom området på ett övergripande plan. En mer detaljerad jämförelse med det närmast relaterade arbetet passar bättre under relaterat arbete nedan.

% ==========================================
% 3. FRÅGESTÄLLNING [cite: 61, 190]
% ==========================================
%\section{Hypotes}
%Vi förväntar oss att SDXL latenta representation ska gå att komprimera ytterliggare med vanliga metoder såsom AVIF eftersom dess kanaler inte bara tycks bestå av okorrellerat “brus”. Detta verifieras genom att latenten omformas till ett bildlikt format (RGBA) och öppnas i ett verktyg som GIMP där det då går att urskilja tydliga bildstrukturer. Det tyder på att latenten innehåller spatialt sammanhängande information (kanter, större former, färgövergångar) och därmed uppvisar redundans som nämnda kompressionsalgoritmer är konstruerade att utnyttja. 


\section*{Frågeställning}
\addcontentsline{toc}{section}{Frågeställning} 
%I det här avsnittet formulerar och preciserar ni er frågeställning. Frågeställningen är den vetenskapliga rapportens viktigaste och mest centrala del.

%Beskriv frågeställningen på ett tydligt sätt, både på hög nivå och i detalj. Redogör för antaganden och begränsningar, samtidigt är en välformulerad frågeställning i sig avgränsande.
Uppvisar SDXL:s latenta representation tillräckligt med 'bildlika' egenskaper för att vanliga bildkomprimeringsmetoder (AVIF/PNG) ska fungera för att minska lagringsstorleken utan att bildkvaliteten faller samman vid rekonstruktion? 
% ==========================================
% 4. METOD [cite: 66, 195]
% ==========================================
\section*{Metod}
\addcontentsline{toc}{section}{Metod} 
%I det här avsnittet ska ni beskriva vilken vetenskaplig metod ni har använt och hur ni har gått tillväga med arbetet att besvara frågeställningen. Ni kan t.ex. ha gjort en matematisk modell, använt simuleringar, gjort en implementation som ni testat eller gjort experiment som ni kanske utvärderat med hjälp av statistiska metoder.

%Metod-avsnittet svarar också på varför ni gjorde på ett visst sätt eller varför ni använde ett visst verktyg. Ni ska alltså inte bara beskriva "vad" utan också "varför". Ställ dig frågan: kan den valda metoden hjälpa mig att besvara frågeställningen?
Vi väljer 20 bilder från Flickr 8k Datfaset (eller alternativt The Kodak Lossless True Color Image Suite). 

Bilderna konverteras med SDXL:s VAE (madebyollin/sdxl-vae-fp16-fix ) för att omvandla varje bild till dess latenta rymd, exempelvis 128x128x4@f32 om bilden är 1024x1024xRGB (HxWxC). 

Istället för flyttal kvantifierar vi värderna som heltal med 8/10/12/16 bitar och sparar som vanligt bildformat (RGBA) inför nästa steg. 

Bilddatan komprimeras med PNG respektive AVIF i tre olika kvalitetslägen, låg/medel/hög (vilket ger olika filstorlekar). AVIF väljs då detta format stödjer fyra kanaler (RGBA), till skillnad från JPG (RGB). 

Slutligen återskapas varje latent representation från de komprimerade filerna och omvandlas tillbaka med samma VAE till en RGB‑bild. 

Vi mäter skillnaden uttryckt i PSNR och SSIM mellan den ursprungliga bilden och varje rekonstruktion och jämför dessa med respektive filstorlek. 

% ==========================================
% 5. FORSKNINGSETISKT STÄLLNINGSTAGANDE [cite: 72, 201]
% ==========================================
\section*{Forskningsetiskt ställningstagande}
\addcontentsline{toc}{section}{Forskningsetiskt ställningstagande} 
    \vspace{0.5cm} % tweak this
%Innebär ert val av frågeställning eller metod något forskningsetiskt ställningstagande? Finns det andra etiska aspekter att beakta i arbetet? Denna rubrik är inte alltid relevant, men ni bör tydligt ange när ni anser att ert arbete inte ger upphov till etiska frågor.

% ==========================================
% 6. UTFÖRANDE [cite: 75, 204]
% ==========================================
\section*{Utförande}
\addcontentsline{toc}{section}{Utförande} 
\textit{(Obs: Ni ska inte använda rubriken ovan, utan ersätta den med lämplig rubrik beroende på ert arbete.)}
    \vspace{0.5cm} % tweak this

%Efter avsnitten ovan följer nu en beskrivning av vad ni gjort. Strukturen ska göras tydlig genom avsnittsrubrikerna. Det är viktigt med en klar och tydlig logisk struktur och ett berättande flöde.

%Ni ska ha med avancerad bakgrundskunskap som är nödvändig för att förstå hur ni löst uppgiften, och definiera hypoteser och viktiga begrepp. Beskrivning av experiment ska vara sådan att det ska gå att upprepa experimenten. Om en sådan beskrivning blir väldigt lång och detaljerad kan ni lägga den i en bilaga.

% ==========================================
% 7. RESULTAT [cite: 82, 211]
% ==========================================
\section*{Resultat}
\addcontentsline{toc}{section}{Resultat} 
    \vspace{0.5cm} % tweak this
%Här kan ni till exempel presentera kvantitativa resultat av experiment, bevis, analys av data etc. Era resultat måste beskrivas så tydligt att en läsare kan bedöma dem. Ni ska också förklara och analysera resultaten. 

%Om ert arbete bottnar i kvalitativa metoder är det möjligt att avsnittet resultat inte passar, i.s.f. skriver ni inte ett explicit avsnitt för resultat.

% ==========================================
% 8. DISKUSSION [cite: 86, 215]
% ==========================================
\section*{Diskussion}
\addcontentsline{toc}{section}{Diskussion} 
    \vspace{0.5cm} % tweak this
%Här presenterar ni er tolkning av resultaten och bedömer deras signifikans. Diskutera möjliga konsekvenser av resultaten, och presentera eventuella rekommendationer. Det är viktigt att diskussionen använder resultaten för att besvara er frågeställning.

%Avsnittet ska också innehålla reflektioner kring arbetet, som till exempel dess begränsningar. Ni kan också diskutera lösningar på problem som ni identifierat och diskuterat tidigare, eller ta upp andra problem som arbetet inte behandlat, frågor som ej besvarats.

%Koppla eventuellt också dina resultat till tidigare arbeten. På så sätt kan diskussionen bli ett samtal med det ni skrev i tidigare avsnitt. Slutligen ska ni sätta ditt eget arbete i ett större sammanhang, bredda ditt perspektiv. Kan dina resultatet generaliseras? Kan det du gjort användas i något annat sammanhang?

% ==========================================
% 9. RELATERAT ARBETE [cite: 94, 223]
% ==========================================
\section*{Relaterat arbete}
\addcontentsline{toc}{section}{Relaterat arbete} 
    \vspace{0.5cm} % tweak this
%Det är här ni beskriver existerande kunskap och vetenskap som är relaterat till ert arbete på ett djupare sätt. Avsnittet ska innehålla analyser av tidigare arbeten som exempelvis beskriver hur olika metoder skiljer sig åt.

%Ni kan också visa på de viktigaste likheterna och skillnaderna i förhållande till ert eget arbete beträffande frågeställning, angreppssätt/metodologi samt resultat.

% ==========================================
% 10. SLUTSATSER [cite: 98, 228]
% ==========================================
\section*{Slutsatser}
\addcontentsline{toc}{section}{Slutsatser} 
    \vspace{0.5cm} % tweak this
%I detta avsnitt ska ni summera rapporten och presentera slutsatser. Ge en kort översikt av frågeställningen. Ni ska sedan tydligt tala om de viktigaste resultaten, förklara deras signifikans och sätta in dem i sitt sammanhang.

%Alla slutsatser ska ha stöd i tidigare delar av rapporten. Ni ska däremot inte presentera nya detaljer. En expert ska kunna läsa detta avsnitt oberoende av resten av rapporten.

% ==========================================
% 11. FRAMTIDA ARBETE [cite: 103, 233]
% ==========================================
\section*{Framtida arbete}
\addcontentsline{toc}{section}{Framtida arbete} 
    \vspace{0.5cm} % tweak this
%Här ska ni diskutera vad som återstår att göra. Ni kan ta upp förbättringar som kan göras, och utvidgningar av ert arbete som kan resultera i nya frågeställningar för framtiden.

% ==========================================
% REFERENSER [cite: 105, 112]
% ==========================================
\newpage
% Ensure you have a 'references.bib' file in the same directory.
\nocite{*}
\printbibliography[heading=bibintoc, title={Referenser}]
\addcontentsline{toc}{section}{Referenser} 

% ==========================================
% BILAGOR [cite: 125, 256]
% ==========================================
\newpage
\appendix
\section{Bilagor}
Övrig information som inte direkt passar in i texten, men som kan vara intressant för en läsare som vill fördjupa sig, placerar ni som bilagor sist i rapporten. Det kan t.ex. vara källkod till en implementation, testdata, bilder av en prototyp etc. Var samtidigt noga med att rapporten ska gå att läsa utan bilagorna.

\end{document}